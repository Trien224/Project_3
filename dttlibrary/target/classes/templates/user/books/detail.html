<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="layout/user-layout :: layout(
          title=${book.title},
          content=~{::content})">

<div th:fragment="content">

    <div class="row">
        <div class="col-md-4">
             <img th:if="${primaryImage != null}"
                  th:src="@{${primaryImage.url}}"
                  class="img-fluid rounded shadow-lg w-100"
                  style="border-radius: 18px !important;">
             <img th:if="${primaryImage == null}"
                  src="https://via.placeholder.com/300x450?text=No+Image"
                  class="img-fluid rounded shadow-lg w-100"
                  style="border-radius: 18px !important;">
        </div>

        <div class="col-md-8 ps-lg-5">
            <h2 class="text-primary mb-3" th:text="${book.title}"></h2>

            <p><b>T√°c gi·∫£:</b> <span th:text="${book.author?.name ?: 'N/A'}"></span></p>
            <p><b>Th·ªÉ lo·∫°i:</b> <span th:text="${book.category?.name ?: 'N/A'}"></span></p>
            <p><b>NƒÉm xu·∫•t b·∫£n:</b> <span th:text="${book.publishedYear}"></span></p>
            <p><b>ISBN:</b> <span th:text="${book.isbn}"></span></p>

            <hr class="my-4">

            <div class="alert alert-info">
                <strong>S·ªë l∆∞·ª£ng c√≤n l·∫°i:</strong>
                <span th:text="${available}" class="fw-bold fs-5 text-success"></span>
            </div>

            <div th:if="${available > 0 && availableItem != null}">
                <form th:action="@{/borrowings/borrow}" method="post">
                    <input type="hidden" name="bookItemId" th:value="${availableItem.id}" />
                    <button type="submit" class="btn btn-primary btn-lg">
                        üìñ M∆∞·ª£n s√°ch ngay
                    </button>
                </form>
            </div>

            <div th:if="${available == 0}">
                <button class="btn btn-secondary btn-lg" disabled>
                    ‚ùå H·∫øt s√°ch
                </button>
            </div>

            <h5 class="mt-5 text-primary">M√¥ t·∫£</h5>
            <p class="mt-3" th:text="${book.description}"></p>
        </div>
    </div>

</div>
</html>
